import{r as R}from"./react-dom-5abb03f8.js";import"./hoist-non-react-statics-3f8ebaa8.js";import{r as i,R as k}from"./react-1f0f9d5b.js";import"./react-is-a192e302.js";import{w as N}from"./use-sync-external-store-03599710.js";function D(e){e()}let g=D;const L=e=>g=e,P=()=>g,x=Symbol.for(`react-redux-context-${i.version}`),h=globalThis;function U(){let e=h[x];return e||(e=i.createContext(null),h[x]=e),e}const a=new Proxy({},new Proxy({},{get(e,n){const o=U();return(t,...s)=>Reflect[n](o,...s)}}));function S(e=a){return function(){return i.useContext(e)}}const C=S(),B=()=>{throw new Error("uSES not initialized!")};let m=B;const H=e=>{m=e},V=(e,n)=>e===n;function $(e=a){const n=e===a?C:S(e);return function(t,s={}){const{equalityFn:r=V,stabilityCheck:c=void 0,noopCheck:f=void 0}=typeof s=="function"?{equalityFn:s}:s,{store:l,subscription:u,getServerState:d,stabilityCheck:b,noopCheck:q}=n();i.useRef(!0);const v=i.useCallback({[t.name](E){return t(E)}}[t.name],[t,b,c]),p=m(u.addNestedSub,l.getState,d||l.getState,v,r);return i.useDebugValue(p),p}}const Q=$();function z(){const e=P();let n=null,o=null;return{clear(){n=null,o=null},notify(){e(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){let t=[],s=n;for(;s;)t.push(s),s=s.next;return t},subscribe(t){let s=!0,r=o={callback:t,next:null,prev:o};return r.prev?r.prev.next=r:n=r,function(){!s||n===null||(s=!1,r.next?r.next.prev=r.prev:o=r.prev,r.prev?r.prev.next=r.next:n=r.next)}}}}const y={notify(){},get:()=>[]};function M(e,n){let o,t=y;function s(b){return l(),t.subscribe(b)}function r(){t.notify()}function c(){d.onStateChange&&d.onStateChange()}function f(){return!!o}function l(){o||(o=n?n.addNestedSub(c):e.subscribe(c),t=z())}function u(){o&&(o(),o=void 0,t.clear(),t=y)}const d={addNestedSub:s,notifyNestedSubs:r,handleChangeWrapper:c,isSubscribed:f,trySubscribe:l,tryUnsubscribe:u,getListeners:()=>t};return d}const W=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",_=W?i.useLayoutEffect:i.useEffect;function X({store:e,context:n,children:o,serverState:t,stabilityCheck:s="once",noopCheck:r="once"}){const c=i.useMemo(()=>{const u=M(e);return{store:e,subscription:u,getServerState:t?()=>t:void 0,stabilityCheck:s,noopCheck:r}},[e,t,s,r]),f=i.useMemo(()=>e.getState(),[e]);_(()=>{const{subscription:u}=c;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),f!==e.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[c,f]);const l=n||a;return k.createElement(l.Provider,{value:c},o)}function w(e=a){const n=e===a?C:S(e);return function(){const{store:t}=n();return t}}const I=w();function T(e=a){const n=e===a?I:w(e);return function(){return n().dispatch}}const Y=T();H(N.useSyncExternalStoreWithSelector);L(R.unstable_batchedUpdates);export{X as P,Y as a,Q as u};
